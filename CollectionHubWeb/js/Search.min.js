function doSearch(){var a="";a=$("#dobMonth").val().length>0?$("#dobYear").val()+"-"+$("#dobMonth").val()+"-"+$("#dobDay").val():$("#dobYear").val(),$("#loadingImage").toggle(),$.ajax({type:"POST",url:"DataService.aspx/SearchFullNameFullAddress",data:"{'firstName':'"+$("#firstName").val()+"','lastName':'"+$("#lastName").val()+"','nino':'"+$("#nino").val()+"','dob':'"+a+"','address':'"+$("#address").val()+"','street':'"+$("#street").val()+"','postCode':'"+$("#postcode").val()+"','currentAddressOnly':'"+$("#addressCurrent").val()+"','sourceCode':''}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){a.hasOwnProperty("d")&&(a=a.d),$("#searchTable").dataTable({destroy:!0,aaData:a,aoColumns:[{mData:"FullName"},{mData:"FullAddress"},{mData:"FromDate"},{mData:"UntilDate"},{mData:"DebtorAge"},{mData:"TotalDebt"},{mData:"DebtOutstanding"},{mData:"Pin"},{mData:"Source"},{mData:"CN_Pin"},{mData:"Urpin"}],aoColumnDefs:[{sTitle:"From Date",aTargets:["fromDate"],mRender:function(a){if(null!=a){var b=new Date(parseInt(a.substr(6))),c=moment(b);return c.format("DD/MM/YYYY")}return""}},{sTitle:"Until Date",aTargets:["untilDate"],mRender:function(a){if(null!=a){var b=new Date(parseInt(a.substr(6))),c=moment(b);return c.format("DD/MM/YYYY")}return""}},{sTitle:"O/S Debt",aTargets:["debt_outstanding"],mRender:function(a){return formatCurrency(a)}},{sTitle:"Debt Total",aTargets:["debt_total"],mRender:function(a){return formatCurrency(a)}},{aTargets:["record_selector"],mRender:function(a,b,c){return'<a href="DebtView.aspx?cn_pin='+c.CN_Pin+"&uprn="+c.Urpin+'" target="_blank" ">'+a+"</a>"}},{aTargets:["source"],bVisible:!1},{aTargets:["pin_id"],bVisible:!1},{aTargets:["cn_pin"],bVisible:!1},{aTargets:["uprn"],bVisible:!1},{width:"95px",targets:2},{width:"95px",targets:3},{width:"120px",targets:4},{width:"125px",targets:5},{width:"125px",targets:6}]}),$("#searchResults").show(),$("#loadingImage").toggle()}})}$("#loadingImage").hide(),$("#searchResults").hide(),$(":text").keypress(function(a){13==a.which&&doSearch()});