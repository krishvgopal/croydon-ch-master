function refreshBatchRunHistory(a){$.ajax({type:"POST",url:"DataService.aspx/GetBatchProcessResults",data:"{'batchProcessId':'"+a+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){a.hasOwnProperty("d")&&(a=a.d),$("#resultsPane").css("visibility","visible"),$("#dataTableBatchProcessResults").dataTable({destroy:!0,iDisplayLength:25,aaData:a,aoColumns:[{mData:"RowIdentifier"},{mData:"RecordID"},{mData:"PIN"},{mData:"UPRN"},{mData:"Source"},{mData:"DebtAccount"},{mData:"FullName"},{mData:"FullAddress"},{mData:"ThisDebt"},{mData:"ThisDebtOS"},{mData:"DebtAsAt"},{mData:"DebtOS"},{mData:"Reduction"},{mData:"Included"}],aoColumnDefs:[{sTitle:"",aTargets:["RowIdentifier"],bVisible:!0,mRender:function(a,b,c){return null!=a?c.Included?'<input disabled type="checkbox" checked name="auto_'+a+'" value="'+a+'">':'<input disabled type="checkbox" name="auto_'+a+'" value="'+a+'">':""}},{sTitle:"",aTargets:["RecordID"],bVisible:!1},{sTitle:"",aTargets:["Included"],bVisible:!1},{sTitle:"",aTargets:["PIN"],bVisible:!1},{sTitle:"",aTargets:["FullName"],mRender:function(a,b,c){return null!=a?'<a href="DebtView.aspx?cn_pin='+c.PIN+"&uprn="+c.UPRN+'" target="_blank">'+a+"</a>":""}},{sTitle:"",aTargets:["UPRN"],bVisible:!1},{sTitle:"From Date",aTargets:["FromDate"],mRender:function(a){if(null!=a){var b=new Date(parseInt(a.substr(6))),c=moment(b);return c.format("DD/MM/YYYY")}return""}},{sTitle:"Until Date",aTargets:["UntilDate"],mRender:function(a){if(null!=a){var b=new Date(parseInt(a.substr(6))),c=moment(b);return c.format("DD/MM/YYYY")}return""}}]})}})}function loadBatchName(a){$.ajax({type:"POST",url:"DataService.aspx/GetBatchName",data:"{'batchId':'"+a+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){$("#processTitle").append("<h3>"+a.d+"</h3>")}})}function openSingleView(a,b){alert(a+" "+b)}function amendProcess(){window.location.href="ProcessView.aspx?p="+$("#ParentId").val()+"&b="+$("#ThisId").val()}function refreshBatchProcessParentHeader(a){$.ajax({type:"POST",url:"DataService.aspx/GetBatchProcessParentHeader",data:"{'batchRunId':'"+a+"'}",contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){a.hasOwnProperty("d")&&(a=a.d),$("#ParentId").val(a.BatchProcessId)}})}var batchRunId=QueryString().p;$("#ThisId").val(batchRunId),refreshBatchRunHistory(batchRunId),loadBatchName(batchRunId),refreshBatchProcessParentHeader(batchRunId);